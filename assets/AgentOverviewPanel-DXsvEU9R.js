import{r as ke,j as t}from"./react-vendor-D4yGots9.js";import{m as i,a as e,C as x,B as m,L as w}from"./index-BBSk8-Kr.js";import"./recharts-vendor-DS4t48dv.js";import"./d3-render-vendor-RkpHolfk.js";import"./d3-scale-vendor-BynLqmir.js";function Be({decisions:l=[],queue:p=[],agent:be,onNavigate:a}){const n=ke.useMemo(()=>{var _,D,O,K,V,H,Q,G,Y,J,X;if(!l||l.length===0)return{totalCycles:0,successfulTrades:0,totalKasMoved:0,avgKelly:0,avgConfidence:0,currentStreak:0,bestWinStreak:0,bestLossStreak:0,lastAction:"NONE",lastActionTime:null,winRate:50,actionBreakdown:{accumulate:0,reduce:0,hold:0,rebalance:0},isProfitable:!1,daysRunning:0,totalPnl:0,estimatedRoi:0,expectedValue:0,riskScore:0,decisionQuality:0,regime:"UNKNOWN",monteCarloWin:0,lastRationale:"",executionRate:0,avgHoldingTime:0,capitalEfficiency:0,timeSinceLastAction:null,consecutiveWins:0,consecutiveLosses:0,signalAccuracy:0};const d=l.filter(o=>{var r;return((r=o.dec)==null?void 0:r.action)==="ACCUMULATE"}).length,f=l.filter(o=>{var r;return((r=o.dec)==null?void 0:r.action)==="REDUCE"}).length,h=l.filter(o=>{var r;return((r=o.dec)==null?void 0:r.action)==="HOLD"}).length,j=l.filter(o=>{var r;return((r=o.dec)==null?void 0:r.action)==="REBALANCE"}).length,u=l.length,b=p.filter(o=>(o==null?void 0:o.status)==="confirmed"||(o==null?void 0:o.receipt_lifecycle)==="confirmed").length,oe=p.filter(o=>(o==null?void 0:o.status)==="pending"||(o==null?void 0:o.status)==="signed"||(o==null?void 0:o.status)==="broadcasted").length,c=l[0],re=((_=c==null?void 0:c.dec)==null?void 0:_.action)||"NONE",le=(c==null?void 0:c.ts)||null,se=((D=c==null?void 0:c.dec)==null?void 0:D.rationale)||"",B=l.reduce((o,r)=>{var s;return o+(((s=r.dec)==null?void 0:s.kelly_fraction)||0)},0)/u,S=l.reduce((o,r)=>{var s;return o+(((s=r.dec)==null?void 0:s.confidence_score)||0)},0)/u,z=l.reduce((o,r)=>{var s;return o+(((s=r.dec)==null?void 0:s.risk_score)||0)},0)/u,E=l.reduce((o,r)=>{var s;return o+(((s=r.dec)==null?void 0:s.monte_carlo_win_pct)||50)},0)/u,W=d,ae=f,v=u>0?W/(W+ae||1)*100:50;let L=0,A=0,C=0,T=0,P=0,g=0,y=null;for(const o of l){const r=(O=o.dec)==null?void 0:O.action;r==="ACCUMULATE"||r==="REBALANCE"?(y==="win"||y===null?g++:g=1,y="win",g>A&&(A=g),T=g):(r==="REDUCE"||r==="HOLD")&&(y==="loss"||y===null?g++:g=1,y="loss",g>C&&(C=g),P=g)}L=g;const ce=((K=l[l.length-1])==null?void 0:K.ts)||Date.now(),I=((V=l[0])==null?void 0:V.ts)||Date.now(),de=Math.max(1,Math.floor((Date.now()-ce)/(1e3*60*60*24))),ge=I?Date.now()-I:null,U=p.filter(o=>o==null?void 0:o.amount_kas).reduce((o,r)=>o+(r.amount_kas||0),0);let k=0;for(let o=0;o<l.length-1;o++){const r=l[o],s=l[o+1];if(((H=r.dec)==null?void 0:H.action)==="ACCUMULATE"&&s){const R=((Q=r.kasData)==null?void 0:Q.priceUsd)||0,Z=((G=s.kasData)==null?void 0:G.priceUsd)||R;Z>R&&(k+=(Z-R)*(((Y=r.dec)==null?void 0:Y.capital_allocation_kas)||0))}}const ue=k/5e3*100,xe=2.5,fe=1,M=v/100,he=M*xe-(1-M)*fe,$=u>0?b/u*100:0,ye=(S*.4+B*.3+$/100*.3)*100,me=((X=(J=c==null?void 0:c.dec)==null?void 0:J.quant_metrics)==null?void 0:X.regime)||"NEUTRAL",pe=u>0?b/u*100:0,F=l.reduce((o,r)=>{var s;return o+(((s=r.dec)==null?void 0:s.capital_allocation_kas)||0)},0),je=F>0?U/F*100:0;return{totalCycles:u,successfulTrades:b,pendingTrades:oe,totalKasMoved:U,avgKelly:B,avgConfidence:S,avgRiskScore:z,avgMonteCarlo:E,currentStreak:L,bestWinStreak:A,bestLossStreak:C,lastAction:re,lastActionTime:le,winRate:v,actionBreakdown:{accumulate:d,reduce:f,hold:h,rebalance:j},isProfitable:v>50&&S>.6&&k>0,daysRunning:de,totalPnl:k,estimatedRoi:ue,expectedValue:he,riskScore:z,decisionQuality:ye,regime:me,monteCarloWin:E,lastRationale:se,executionRate:$,capitalEfficiency:je,timeSinceLastAction:ge,consecutiveWins:T,consecutiveLosses:P,signalAccuracy:pe}},[l,p]),N=()=>n.winRate>=60&&n.totalPnl>0?e.ok:n.winRate>=50?e.accent:e.danger,q=()=>{if(n.totalCycles===0)return e.dim;const d=n.timeSinceLastAction?(Date.now()-n.timeSinceLastAction)/(1e3*60*60):999;return d<1?e.ok:d<6?e.accent:e.warn},ee=()=>{switch(n.regime){case"RISK_ON":return e.ok;case"RISK_OFF":return e.danger;case"BULL":return e.accent;case"BEAR":return e.warn;default:return e.dim}},te=d=>{switch(d){case"ACCUMULATE":return"ðŸ“ˆ";case"REDUCE":return"ðŸ“‰";case"HOLD":return"â¸ï¸";case"REBALANCE":return"âš–ï¸";default:return"â“"}},ne=d=>{switch(d){case"ACCUMULATE":return"Accumulating";case"REDUCE":return"Reducing";case"HOLD":return"Holding";case"REBALANCE":return"Rebalancing";default:return"Idle"}},ie=d=>{const f=Math.floor(d/6e4),h=Math.floor(f/60),j=Math.floor(h/24);return j>0?`${j}d ${h%24}h ago`:h>0?`${h}h ${f%60}m ago`:`${f}m ago`};return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:16},children:[t.jsx("div",{style:{fontSize:13,color:e.text,fontWeight:700,...i},children:"ðŸ¤– AI Trading Agent Overview"}),t.jsx("div",{style:{fontSize:11,color:e.dim},children:"Your autonomous trading agent performance at a glance"})]}),t.jsxs(x,{p:20,style:{marginBottom:16,background:`linear-gradient(135deg, ${n.isProfitable?e.ok+"15":e.danger+"15"} 0%, ${e.s1} 100%)`,border:`1px solid ${n.isProfitable?e.ok+"40":e.danger+"40"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:n.isProfitable?e.ok:e.danger,display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,boxShadow:n.isProfitable?`0 0 20px ${e.ok}60`:`0 0 20px ${e.danger}60`},children:n.isProfitable?"âœ“":"âœ—"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:18,fontWeight:700,color:n.isProfitable?e.ok:e.danger},children:n.isProfitable?"PROFITABLE":"NOT PROFITABLE"}),t.jsxs("div",{style:{fontSize:11,color:e.dim,...i},children:["Based on ",n.totalCycles," trading cycles"]})]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx(m,{text:n.totalCycles>0?"ACTIVE":"WAITING",color:n.totalCycles>0?e.ok:e.dim,dot:!0}),t.jsxs("div",{style:{fontSize:10,color:e.dim,...i,marginTop:4},children:[n.totalCycles," cycles"]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12},children:[t.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",borderRadius:8,padding:14},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Est. P&L"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.totalPnl>=0?e.ok:e.danger,...i},children:[n.totalPnl>=0?"+":"",n.totalPnl.toFixed(2)," USD"]})]}),t.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",borderRadius:8,padding:14},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Est. ROI"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.estimatedRoi>=0?e.ok:e.danger,...i},children:[n.estimatedRoi>=0?"+":"",n.estimatedRoi.toFixed(2),"%"]})]}),t.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",borderRadius:8,padding:14},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Win Rate"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:N(),...i},children:[n.winRate.toFixed(1),"%"]})]}),t.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",borderRadius:8,padding:14},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Expected Value"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.expectedValue>=0?e.ok:e.danger,...i},children:[n.expectedValue>=0?"+":"",n.expectedValue.toFixed(2),"%"]})]})]})]}),t.jsxs(x,{p:18,style:{marginBottom:16,background:`linear-gradient(135deg, ${e.s2} 0%, ${e.s1} 100%)`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:t.jsx("span",{style:{fontSize:14,fontWeight:700,color:e.text},children:"ðŸ§  Latest AI Decision"})}),t.jsxs("div",{style:{display:"flex",gap:6},children:[t.jsx(m,{text:te(n.lastAction)+" "+ne(n.lastAction),color:n.lastAction==="ACCUMULATE"?e.ok:n.lastAction==="REDUCE"?e.danger:e.warn}),n.timeSinceLastAction&&t.jsx(m,{text:ie(n.timeSinceLastAction),color:q()})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:10,marginBottom:14},children:[t.jsxs("div",{style:{background:e.s2,borderRadius:6,padding:10,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Confidence"}),t.jsxs("div",{style:{fontSize:18,fontWeight:700,color:n.avgConfidence>=.7?e.ok:n.avgConfidence>=.5?e.warn:e.danger,...i},children:[(n.avgConfidence*100).toFixed(0),"%"]})]}),t.jsxs("div",{style:{background:e.s2,borderRadius:6,padding:10,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Kelly Size"}),t.jsxs("div",{style:{fontSize:18,fontWeight:700,color:e.accent,...i},children:[(n.avgKelly*100).toFixed(1),"%"]})]}),t.jsxs("div",{style:{background:e.s2,borderRadius:6,padding:10,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Monte Carlo"}),t.jsxs("div",{style:{fontSize:18,fontWeight:700,color:e.ok,...i},children:[n.monteCarloWin.toFixed(0),"%"]})]}),t.jsxs("div",{style:{background:e.s2,borderRadius:6,padding:10,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Risk Score"}),t.jsx("div",{style:{fontSize:18,fontWeight:700,color:n.riskScore<=.4?e.ok:n.riskScore<=.7?e.warn:e.danger,...i},children:n.riskScore.toFixed(2)})]})]}),t.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:n.lastRationale?12:0},children:[t.jsx(m,{text:`ðŸ“Š REGIME: ${String(n.regime).replace(/_/g," ")}`,color:ee()}),t.jsx(m,{text:`â­ QUALITY: ${n.decisionQuality.toFixed(0)}`,color:n.decisionQuality>=70?e.ok:n.decisionQuality>=50?e.warn:e.danger}),t.jsx(m,{text:`âš¡ SIGNAL ACCURACY: ${n.signalAccuracy.toFixed(0)}%`,color:n.signalAccuracy>=80?e.ok:n.signalAccuracy>=50?e.warn:e.danger})]}),n.lastRationale&&t.jsxs("div",{style:{background:e.s2,borderRadius:6,padding:10},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"AI RATIONALE"}),t.jsxs("div",{style:{fontSize:12,color:e.text,...i,lineHeight:1.4},children:[n.lastRationale.slice(0,180),n.lastRationale.length>180?"...":""]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:10,marginBottom:16},children:[t.jsxs(x,{p:14,style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Trades Executed"}),t.jsx("div",{style:{fontSize:20,fontWeight:700,color:e.text,...i},children:n.successfulTrades}),n.pendingTrades>0&&t.jsxs("div",{style:{fontSize:10,color:e.warn,...i},children:["+ ",n.pendingTrades," pending"]})]}),t.jsxs(x,{p:14,style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"KAS Moved"}),t.jsx("div",{style:{fontSize:20,fontWeight:700,color:e.accent,...i},children:n.totalKasMoved.toFixed(0)}),t.jsx("div",{style:{fontSize:10,color:e.dim,...i},children:"KAS"})]}),t.jsxs(x,{p:14,style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Capital Efficiency"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.capitalEfficiency>=80?e.ok:n.capitalEfficiency>=50?e.warn:e.danger,...i},children:[n.capitalEfficiency.toFixed(0),"%"]})]}),t.jsxs(x,{p:14,style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Days Running"}),t.jsx("div",{style:{fontSize:20,fontWeight:700,color:e.text,...i},children:n.daysRunning})]})]}),t.jsxs(x,{p:16,style:{marginBottom:16},children:[t.jsx(w,{style:{marginBottom:12},children:"ðŸ“Š Decision Distribution"}),t.jsxs("div",{style:{display:"flex",height:32,borderRadius:6,overflow:"hidden",marginBottom:12},children:[n.actionBreakdown.accumulate>0&&t.jsx("div",{style:{width:`${n.actionBreakdown.accumulate/n.totalCycles*100}%`,background:e.ok,display:"flex",alignItems:"center",justifyContent:"center",minWidth:n.actionBreakdown.accumulate/n.totalCycles>.15?40:0},children:n.actionBreakdown.accumulate/n.totalCycles>.15&&t.jsxs("span",{style:{fontSize:11,color:e.s1,...i,fontWeight:600},children:["ðŸ“ˆ ",n.actionBreakdown.accumulate]})}),n.actionBreakdown.reduce>0&&t.jsx("div",{style:{width:`${n.actionBreakdown.reduce/n.totalCycles*100}%`,background:e.danger,display:"flex",alignItems:"center",justifyContent:"center",minWidth:n.actionBreakdown.reduce/n.totalCycles>.15?40:0},children:n.actionBreakdown.reduce/n.totalCycles>.15&&t.jsxs("span",{style:{fontSize:11,color:e.s1,...i,fontWeight:600},children:["ðŸ“‰ ",n.actionBreakdown.reduce]})}),n.actionBreakdown.hold>0&&t.jsx("div",{style:{width:`${n.actionBreakdown.hold/n.totalCycles*100}%`,background:e.warn,display:"flex",alignItems:"center",justifyContent:"center",minWidth:n.actionBreakdown.hold/n.totalCycles>.15?40:0},children:n.actionBreakdown.hold/n.totalCycles>.15&&t.jsxs("span",{style:{fontSize:11,color:e.s1,...i,fontWeight:600},children:["â¸ï¸ ",n.actionBreakdown.hold]})}),n.actionBreakdown.rebalance>0&&t.jsx("div",{style:{width:`${n.actionBreakdown.rebalance/n.totalCycles*100}%`,background:e.purple,display:"flex",alignItems:"center",justifyContent:"center",minWidth:n.actionBreakdown.rebalance/n.totalCycles>.15?40:0},children:n.actionBreakdown.rebalance/n.totalCycles>.15&&t.jsxs("span",{style:{fontSize:11,color:e.s1,...i,fontWeight:600},children:["âš–ï¸ ",n.actionBreakdown.rebalance]})})]}),t.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",fontSize:11,...i},children:[t.jsxs("span",{style:{color:e.ok},children:["ðŸ“ˆ Buy: ",n.actionBreakdown.accumulate]}),t.jsxs("span",{style:{color:e.danger},children:["ðŸ“‰ Sell: ",n.actionBreakdown.reduce]}),t.jsxs("span",{style:{color:e.warn},children:["â¸ï¸ Hold: ",n.actionBreakdown.hold]}),t.jsxs("span",{style:{color:e.purple},children:["âš–ï¸ Rebalance: ",n.actionBreakdown.rebalance]})]})]}),t.jsxs(x,{p:16,style:{marginBottom:16},children:[t.jsx(w,{style:{marginBottom:12},children:"ðŸ”¥ Streaks & Performance"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:10},children:[t.jsxs("div",{style:{background:e.s2,borderRadius:8,padding:12,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Current"}),t.jsx("div",{style:{fontSize:24,fontWeight:700,color:n.currentStreak>0?e.accent:e.dim,...i},children:n.currentStreak})]}),t.jsxs("div",{style:{background:e.s2,borderRadius:8,padding:12,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Best Win"}),t.jsx("div",{style:{fontSize:24,fontWeight:700,color:e.ok,...i},children:n.bestWinStreak})]}),t.jsxs("div",{style:{background:e.s2,borderRadius:8,padding:12,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Best Loss"}),t.jsx("div",{style:{fontSize:24,fontWeight:700,color:e.danger,...i},children:n.bestLossStreak})]}),t.jsxs("div",{style:{background:e.s2,borderRadius:8,padding:12,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...i,marginBottom:4},children:"Execution Rate"}),t.jsxs("div",{style:{fontSize:24,fontWeight:700,color:n.executionRate>=80?e.ok:n.executionRate>=50?e.warn:e.danger,...i},children:[n.executionRate.toFixed(0),"%"]})]})]})]}),t.jsxs(x,{p:16,children:[t.jsx(w,{style:{marginBottom:12},children:"ðŸ”— Quick Access"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:10},children:[t.jsxs("button",{onClick:()=>a==null?void 0:a("analytics"),style:{background:"rgba(16,25,35,0.45)",border:"1px solid rgba(57,221,182,0.1)",borderRadius:8,padding:12,cursor:"pointer",textAlign:"left",transition:"all 0.15s"},children:[t.jsx("div",{style:{fontSize:12,color:e.accent,fontWeight:600,...i},children:"ðŸ“Š View Analytics"}),t.jsx("div",{style:{fontSize:10,color:e.dim,marginTop:4},children:"Detailed performance metrics"})]}),t.jsxs("button",{onClick:()=>a==null?void 0:a("queue"),style:{background:"rgba(16,25,35,0.45)",border:"1px solid rgba(57,221,182,0.1)",borderRadius:8,padding:12,cursor:"pointer",textAlign:"left",transition:"all 0.15s"},children:[t.jsx("div",{style:{fontSize:12,color:e.accent,fontWeight:600,...i},children:"ðŸ“‹ Action Queue"}),t.jsx("div",{style:{fontSize:10,color:e.dim,marginTop:4},children:n.pendingTrades>0?`${n.pendingTrades} pending transactions`:"View all transactions"})]}),t.jsxs("button",{onClick:()=>a==null?void 0:a("controls"),style:{background:"rgba(16,25,35,0.45)",border:"1px solid rgba(57,221,182,0.1)",borderRadius:8,padding:12,cursor:"pointer",textAlign:"left",transition:"all 0.15s"},children:[t.jsx("div",{style:{fontSize:12,color:e.accent,fontWeight:600,...i},children:"âš™ï¸ Agent Controls"}),t.jsx("div",{style:{fontSize:10,color:e.dim,marginTop:4},children:"Strategy & execution settings"})]}),t.jsxs("button",{onClick:()=>a==null?void 0:a("portfolio"),style:{background:"rgba(16,25,35,0.45)",border:"1px solid rgba(57,221,182,0.1)",borderRadius:8,padding:12,cursor:"pointer",textAlign:"left",transition:"all 0.15s"},children:[t.jsx("div",{style:{fontSize:12,color:e.accent,fontWeight:600,...i},children:"ðŸ’¼ Portfolio"}),t.jsx("div",{style:{fontSize:10,color:e.dim,marginTop:4},children:"Multi-agent allocation"})]})]})]})]})}export{Be as AgentOverviewPanel};
