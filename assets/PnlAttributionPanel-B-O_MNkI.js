import{j as i}from"./react-vendor-DIZeG9y9.js";import{a as t,m as l,B as d,C as p}from"./index-DiRKjhhb.js";import"./recharts-vendor-DOrdnfgd.js";import"./d3-render-vendor-RkpHolfk.js";import"./d3-scale-vendor-BynLqmir.js";function M({summary:e}){const s=Array.isArray(e==null?void 0:e.rows)?e.rows:[],g=Number(((e==null?void 0:e.netPnlKas)??(e==null?void 0:e.estimatedNetPnlKas))||0),o=String((e==null?void 0:e.netPnlMode)||"estimated"),j=Number((e==null?void 0:e.executedSignals)||0),a=Number((e==null?void 0:e.signalQualityScore)||0),r=Number((e==null?void 0:e.timingAlphaPct)||0),v=Math.max(1,Number((e==null?void 0:e.realizedMinConfirmations)||1)),h=!!(e!=null&&e.truthDegraded),S=Number((e==null?void 0:e.truthMismatchRatePct)||0),z=Number((e==null?void 0:e.truthCheckedSignals)||0),k=Number((e==null?void 0:e.truthMismatchSignals)||0),b=o==="realized"?"Realized":o==="hybrid"?"Hybrid":"Estimated",N=g>=0,B=[{label:"Net PnL",value:`${g>=0?"+":""}${g.toFixed(4)} KAS`,color:N?t.ok:t.danger,subtext:b},{label:"Executed",value:j,color:t.accent,subtext:"signals"},{label:"Quality",value:a.toFixed(2),color:a>=.65?t.ok:t.warn,subtext:"score"},{label:"Timing",value:`${r>=0?"+":""}${r.toFixed(1)}%`,color:r>=0?t.ok:t.warn,subtext:"alpha"}];return i.jsxs("div",{children:[i.jsxs("div",{style:{marginBottom:20},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:12},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:18,color:t.text,fontWeight:700,...l,marginBottom:4},children:"Performance Attribution"}),i.jsx("div",{style:{fontSize:12,color:t.dim},children:o==="realized"?"Fully confirmed with chain timestamps":o==="hybrid"?"Hybrid: confirmed + estimated costs":"Estimated from quant EV & execution data"})]}),i.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[i.jsx(d,{text:b.toUpperCase(),color:o==="realized"?t.ok:o==="hybrid"?t.accent:t.warn}),i.jsx(d,{text:`FLOOR ${v} CONF`,color:t.dim}),h&&i.jsx(d,{text:"DEGRADED",color:t.danger})]})]}),h&&i.jsx("div",{style:{marginTop:12,padding:"10px 14px",background:`${t.danger}15`,border:`1px solid ${t.danger}30`,borderRadius:6},children:i.jsxs("div",{style:{fontSize:11,color:t.danger,...l},children:["⚠ Receipt Mismatch: ",S.toFixed(1),"% (",k,"/",z," checks)"]})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(140px,1fr))",gap:12,marginBottom:20},children:B.map(n=>i.jsxs(p,{p:16,style:{background:`linear-gradient(135deg, ${t.s2} 0%, ${t.s1} 100%)`},children:[i.jsx("div",{style:{fontSize:10,color:t.dim,...l,marginBottom:6,textTransform:"uppercase",letterSpacing:"0.05em"},children:n.label}),i.jsx("div",{style:{fontSize:22,color:n.color,fontWeight:700,...l,lineHeight:1.2},children:n.value}),i.jsx("div",{style:{fontSize:10,color:t.dim,...l,marginTop:4},children:n.subtext})]},n.label))}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("div",{style:{fontSize:11,color:t.dim,...l,marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Data Provenance"}),i.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[i.jsx(d,{text:`● Chain ${Number((e==null?void 0:e.provenanceChainSignals)||0)}`,color:Number((e==null?void 0:e.provenanceChainSignals)||0)>0?t.ok:t.dim}),i.jsx(d,{text:`● Backend ${Number((e==null?void 0:e.provenanceBackendSignals)||0)}`,color:Number((e==null?void 0:e.provenanceBackendSignals)||0)>0?t.purple:t.dim}),i.jsx(d,{text:`● Estimated ${Number((e==null?void 0:e.provenanceEstimatedSignals)||0)}`,color:Number((e==null?void 0:e.provenanceEstimatedSignals)||0)>0?t.warn:t.dim})]})]}),i.jsxs(p,{p:0,style:{marginBottom:20},children:[i.jsx("div",{style:{padding:"14px 18px",borderBottom:`1px solid ${t.border}`,background:t.s2},children:i.jsx("span",{style:{fontSize:12,color:t.text,fontWeight:600,...l},children:"PnL Components"})}),s.length===0&&i.jsxs("div",{style:{padding:24,textAlign:"center"},children:[i.jsx("div",{style:{fontSize:14,color:t.dim,marginBottom:4},children:"No attribution data yet"}),i.jsx("div",{style:{fontSize:12,color:t.dim},children:"Run agent cycles to build performance history"})]}),s.map((n,c)=>{const x=Number((n==null?void 0:n.value)||0),f=x>=0;return i.jsxs("div",{style:{padding:"12px 18px",borderBottom:c<s.length-1?`1px solid ${t.border}`:"none",display:"flex",justifyContent:"space-between",alignItems:"center",background:c%2===0?"transparent":`${t.s2}40`},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:13,color:t.text,...l},children:n==null?void 0:n.label}),(n==null?void 0:n.hint)&&i.jsx("div",{style:{fontSize:11,color:t.dim,marginTop:2},children:n.hint})]}),i.jsxs("div",{style:{fontSize:14,color:f?t.ok:t.danger,fontWeight:600,...l},children:[f?"+":"",x.toFixed(4),String((n==null?void 0:n.label)||"").includes("Alpha")?"%":" KAS"]})]},String(n==null?void 0:n.label))})]}),i.jsxs(p,{p:16,children:[i.jsx("div",{style:{fontSize:13,color:t.text,fontWeight:600,...l,marginBottom:12},children:"Execution Funnel"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:8},children:[["Actionable",(e==null?void 0:e.actionableSignals)??0,t.text],["Executed",(e==null?void 0:e.executedSignals)??0,t.ok],["Pending",(e==null?void 0:e.pendingSignals)??0,t.warn],["Rejected",(e==null?void 0:e.rejectedSignals)??0,t.danger]].map(([n,c,x])=>i.jsxs("div",{style:{textAlign:"center",padding:"10px 8px",background:t.s2,borderRadius:6},children:[i.jsx("div",{style:{fontSize:18,color:x,fontWeight:700,...l},children:String(c)}),i.jsx("div",{style:{fontSize:10,color:t.dim,...l,marginTop:2},children:n})]},String(n)))})]})]})}export{M as PnlAttributionPanel};
