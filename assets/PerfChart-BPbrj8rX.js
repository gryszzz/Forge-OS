import{r as h,j as t}from"./react-vendor-D4yGots9.js";import{f as g,c as j,C as y,L as k,m as x,a as e,B as C}from"./index-CSC0FDeX.js";import{R,A as v,C as w,X as A,Y as L,T as E,b as u,c as S}from"./recharts-vendor-DS4t48dv.js";import"./d3-render-vendor-RkpHolfk.js";import"./d3-scale-vendor-BynLqmir.js";const F=({active:n,payload:s})=>{var c;if(!n||!(s!=null&&s.length))return null;const r=(c=s[0])==null?void 0:c.payload;return t.jsxs("div",{style:{background:e.s2,border:`1px solid ${e.border}`,borderRadius:4,padding:"8px 12px"},children:[t.jsx("div",{style:{fontSize:10,color:e.dim,...x,marginBottom:3},children:r==null?void 0:r.label}),t.jsxs("div",{style:{fontSize:13,color:(r==null?void 0:r.roi)>=0?e.ok:e.danger,fontWeight:700,...x},children:[(r==null?void 0:r.roi)>=0?"+":"",r==null?void 0:r.roi,"%"]})]})};function T({decisions:n,kpiTarget:s}){const[r,c]=h.useState(()=>{const o=Date.now();let l=0;return Array.from({length:16},(m,d)=>(l=j(l+(Math.random()-.42)*1.4,-15,30),{label:g(o-(15-d)*36e5*2),roi:parseFloat(l.toFixed(2)),target:Number(s)||12}))}),f=h.useRef(0);h.useEffect(()=>{var d;if(n.length<=f.current)return;f.current=n.length;const o=(d=n[0])==null?void 0:d.dec,l=r[r.length-1],m=(o==null?void 0:o.action)==="ACCUMULATE"?Math.random()*1.2:(o==null?void 0:o.action)==="REDUCE"?-Math.random()*.8:(Math.random()-.5)*.4;c(b=>[...b.slice(-40),{label:g(Date.now()),roi:parseFloat((l.roi+m).toFixed(2)),target:Number(s)||12}])},[n.length]);const i=r[r.length-1],a=Number(s)||12,p=j(i.roi/a*100,0,100).toFixed(0);return t.jsxs(y,{p:18,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:10},children:[t.jsxs("div",{children:[t.jsx(k,{children:"Performance â€” Agent ROI"}),t.jsxs("span",{style:{fontSize:24,color:i.roi>=0?e.ok:e.danger,fontWeight:700,...x},children:[i.roi>=0?"+":"",i.roi,"%"]}),t.jsxs("span",{style:{fontSize:12,color:e.dim,marginLeft:10},children:["target ",a,"%"]})]}),t.jsx(C,{text:i.roi>=a?"TARGET MET":"IN PROGRESS",color:i.roi>=a?e.ok:e.warn})]}),t.jsx("div",{style:{height:3,background:e.s2,borderRadius:2,marginBottom:14},children:t.jsx("div",{style:{height:"100%",width:`${p}%`,background:i.roi>=a?e.ok:e.accent,borderRadius:2,transition:"width 0.5s"}})}),t.jsx(R,{width:"100%",height:160,children:t.jsxs(v,{data:r,margin:{top:2,right:4,left:-24,bottom:0},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"g",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:e.accent,stopOpacity:.14}),t.jsx("stop",{offset:"95%",stopColor:e.accent,stopOpacity:0})]})}),t.jsx(w,{stroke:e.border,strokeDasharray:"3 3",vertical:!1}),t.jsx(A,{dataKey:"label",tick:{fill:e.dim,fontSize:10,fontFamily:"Courier New"},tickLine:!1,axisLine:!1,interval:4}),t.jsx(L,{tick:{fill:e.dim,fontSize:10,fontFamily:"Courier New"},tickLine:!1,axisLine:!1,tickFormatter:o=>`${o}%`}),t.jsx(E,{content:t.jsx(F,{})}),t.jsx(u,{y:a,stroke:e.warn,strokeDasharray:"5 4",strokeWidth:1}),t.jsx(u,{y:0,stroke:e.muted,strokeWidth:1}),t.jsx(S,{type:"monotone",dataKey:"roi",stroke:e.accent,strokeWidth:2,fill:"url(#g)",dot:!1})]})})]})}export{T as PerfChart};
