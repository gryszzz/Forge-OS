(function(){"use strict";var u;const o="__forgeos__",n=new Map;window.addEventListener("message",r=>{if(r.source!==window)return;const e=r.data;if(!(e!=null&&e[o])||typeof e.requestId!="string"||!("result"in e)&&!("error"in e))return;const t=n.get(e.requestId);t&&(clearTimeout(t.timer),n.delete(e.requestId),e.error?t.reject(new Error(String(e.error))):t.resolve(e.result))});function i(r,e,t=12e4){return new Promise((E,d)=>{const s=crypto.randomUUID(),_=setTimeout(()=>{n.delete(s),d(new Error("Forge-OS: request timed out"))},Math.max(250,t));n.set(s,{resolve:E,reject:d,timer:_}),window.postMessage({[o]:!0,type:r,requestId:s,...e},"*")})}function c(){return{isForgeOS:!0,version:"1.0.0",async connect(){return i("FORGEOS_CONNECT",void 0,18e3)},async signMessage(r){return i("FORGEOS_SIGN",{message:r})},openExtension(){window.postMessage({[o]:!0,type:"FORGEOS_OPEN_POPUP"},"*")},disconnect(){}}}(u=window.forgeos)!=null&&u.isForgeOS||(window.forgeos=c(),window.dispatchEvent(new CustomEvent("forgeos#initialized")))})();
